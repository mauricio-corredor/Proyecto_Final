<a class="btn btn-standard btn-sm" (click)="hideForm()" i18n>&#8249; Go back</a>
<div class="form-container mx-auto bodega-form">
  <div class="mb-3">
    <h1 i18n>Add bodega</h1>
  </div>
  <form [formGroup]="bodegaForm" (ngSubmit)="!bodegaForm.invalid && createBodega(bodegaForm.value)">
    <div class="mb-3">
      <label for="bodega-descripcionBodega" class="form-label" i18n>Name</label>
      <input formControlName="descripcionBodega" type="text" class="form-control" id="bodega-descripcionBodega" aria-describedby="bodega-descripcionBodega" placeholder="Album full descripcionBodega" i18n-placeholder>
      <div class="alert alert-danger alert-dismissible fade show" *ngIf="bodegaForm.get('descripcionBodega').hasError('required') &&
          bodegaForm.get('descripcionBodega').touched" i18n>
        *Name required
      </div>
    </div>

    <div class="mb-3">
      <label class="d-block mt-1 mb-1" i18n>Artist</label>
      <select formControlName="bodegas" id="artist-select" class="custom-select col-12"
        aria-label="Artist selection">
        <option selected value="" i18n>Select an artist</option>
        <option *ngFor="let p of bodegas" [ngValue]="p">{{p.descripcionBodega}}</option>
      </select>
      <div class="alert alert-danger alert-dismissible fade show" *ngIf="bodegaForm.get('bodegas').hasError('required') &&
          bodegaForm.get('bodegas').touched" i18n>
        *Required artist
      </div>
    </div>

    <div class="mb-3">
      <label for="bodega-cover" class="form-label" i18n>Cover</label>
      <input formControlName="cover" class="form-control" type="url" id="bodega-cover" aria-describedby="bodega-cover"
         placeholder="URL" i18n-placeholder>
      <img id="bodega-cover-preview" class="img-fluid my-3" [src]="url" (error)="clearUrl($event)" alt="Album cover" *ngIf="url" i18n-alt>
      <div class="alert alert-danger alert-dismissible fade show" *ngIf="bodegaForm.get('cover').hasError('required') &&
          bodegaForm.get('cover').touched" i18n>
        *Image required
      </div>
      <div class="alert alert-danger alert-dismissible fade show img-verification" *ngIf="url == undefined" i18n>
        *Enter a valid image URL
      </div>
    </div>

    <div class="mb-3">
      <label for="bodega-description" class="form-label" i18n>Description</label>
      <textarea formControlName="description" class="form-control" id="bodega-description" rows="2"
        aria-describedby="bodega-description" placeholder="Album description" i18n-placeholder></textarea>

      <div class="alert alert-danger alert-dismissible fade show" *ngIf="bodegaForm.get('description').hasError('required') &&
        bodegaForm.get('description').touched" i18n>
        *Description required
      </div>
      <div class="alert alert-danger alert-dismissible fade show" *ngIf="bodegaForm.get('description').hasError('minlength') &&
        bodegaForm.get('description').touched" i18n>
        *Description too short
      </div>
    </div>

    <div class="mb-3">
      <label for="genre-select" class="d-block mt-3 mb-1" i18n>Genre</label>
      <select formControlName="genre" id="genre-select" class="custom-select col-12" aria-label="Genre selection">
        <option selected value="" i18n>Select a genre</option>

      </select>
      <div class="alert alert-danger alert-dismissible fade show" *ngIf="bodegaForm.get('genre').hasError('required') &&
          bodegaForm.get('genre').touched" i18n>
        *Genre required
      </div>
    </div>

    <div class="mb-3">
      <label for="bodega-date" class="form-label" i18n>Release date</label>
      <input formControlName="releaseDate" type="date" id="bodega-date" class="form-control">
      <div class="alert alert-danger alert-dismissible fade show" *ngIf="bodegaForm.get('releaseDate').hasError('required') &&
          bodegaForm.get('releaseDate').touched" i18n>
        *Date required
      </div>
    </div>

    <div class="mb-3">
      <label for="label-select" class="d-block mt-3 mb-1" i18n>Record label</label>
      <select formControlName="recordLabel" id="label-select" class="custom-select col-12"
        aria-label="Record Label selection">
        <option selected value="" i18n>Seleccione la zona</option>
        <option *ngFor="let l of zonas" [ngValue]="l">{{l}}</option>
      </select>
      <div class="alert alert-danger alert-dismissible fade show" *ngIf="bodegaForm.get('recordLabel').hasError('required') &&
          bodegaForm.get('recordLabel').touched" i18n>
        *Label required
      </div>
    </div>
    <div class="form-group">
      <button type="submit" class="create-bodega-button btn btn-standard" [disabled]="!bodegaForm.valid || !url" i18n>Submit</button>
      <button type="button" class="btn btn-light ml-3" (click)="hideForm()" i18n>Cancel</button>
    </div>
  </form>
</div>
